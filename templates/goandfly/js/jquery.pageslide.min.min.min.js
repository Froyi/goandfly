(function(l){function h(e,a){if(0===e.indexOf("#")){l(e).clone(!0).appendTo(m.empty()).show()}else{if(a){var d=l("<iframe />").attr({src:e,frameborder:0,hspace:0}).css({width:"100%",height:"100%"});m.html(d)}else{m.load(e)}m.data("localEl",!1)}}function j(g,f){var a=m.outerWidth(!0),d={},e={};if(!m.is(":visible")&&!c){c=!0;switch(g){case"left":m.css({left:"auto",right:"-"+a+"px"});d["margin-left"]="-="+a;e.right="+="+a;break;default:m.css({left:"-"+a+"px",right:"auto"}),d["margin-left"]="+="+a,e.left="+="+a}k.animate(d,f);m.show().animate(e,f,function(){c=!1})}}var k=l("body"),m=l("#pageslide"),c=!1,b;0==m.length&&(m=l("<div />").attr("id","pageslide").css("display","none").appendTo(l("body")));l.fn.pageslide=function(a){this.click(function(f){var d=l(this),e=l.extend({href:d.attr("href")},a);f.preventDefault();f.stopPropagation();m.is(":visible")&&d[0]==b?l.pageslide.close():(l.pageslide(e),b=d[0])})};l.fn.pageslide.defaults={speed:200,direction:"right",modal:!1,iframe:!0,href:null};l.pageslide=function(d){var a=l.extend({},l.fn.pageslide.defaults,d);m.is(":visible")&&m.data("direction")!=a.direction?l.pageslide.close(function(){h(a.href,a.iframe);j(a.direction,a.speed)}):(h(a.href,a.iframe),m.is(":hidden")&&j(a.direction,a.speed));m.data(a)};l.pageslide.close=function(d){var a=l("#pageslide"),e=a.outerWidth(!0),f=a.data("speed"),g={},i={};if(!a.is(":hidden")&&!c){c=!0;switch(a.data("direction")){case"left":g["margin-left"]="+="+e;i.right="-="+e;break;default:g["margin-left"]="-="+e,i.left="-="+e}a.animate(i,f);k.animate(g,f,function(){a.hide();c=!1;"undefined"!=typeof d&&d()})}};m.click(function(a){a.stopPropagation()});l(document).bind("click keyup",function(a){"keyup"==a.type&&27!=a.keyCode||m.is(":visible")&&!m.data("modal")&&l.pageslide.close()})})(jQuery);